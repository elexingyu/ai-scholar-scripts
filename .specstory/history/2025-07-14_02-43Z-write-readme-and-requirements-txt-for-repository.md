<!-- Generated by SpecStory -->

# Write README and requirements.txt for repository (2025-07-14 02:43Z)

_**User**_

@grant_to_zotero_converter.py @news_to_zotero_converter.py @podcast_to_zotero_converter.py @twitter_to_zotero_converter.py @youtube_to_zotero_converter.py 

请你认真分析和扫描，帮我给这个仓库写一个README以及requirements.txt

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Initiating README & Requirements**

I've examined the project files, which are all Python scripts handling data conversion from various sources (grants, news, podcasts, Twitter, YouTube) to Zotero-compatible CSL JSON. I'm focusing on the plan to create a README.md and requirements.txt file. My goal is to clearly document how to use these scripts and list their dependencies. I'm keen on making this as understandable and usable as possible.


**Defining the README Structure**

I'm now outlining the structure for the `README.md` file. I'll include sections for a project description, usage instructions (covering each script), and perhaps a brief note about the lack of external dependencies in the `requirements.txt` file. Thinking about making it very clear what data format each script accepts and what it outputs.


**Identifying Dependencies**

I've finished analyzing the Python files for dependencies. I confirmed all necessary libraries are standard Python modules; therefore, no external dependencies are needed. I'm leaning toward creating an empty `requirements.txt` to indicate this. I've also outlined the structure of the `README.md` file, considering the project description, script overviews, prerequisites, and general usage instructions.


**Refining the Usage Section**

I've completed my dependency analysis, confirming no external libraries are needed. Now, I'm focusing on the `README.md` file, specifically the "Usage" section. I'll provide clear command-line examples and explain how to edit the input/output filenames within each script's `if __name__ == '__main__':` block. My aim is to make the process as straightforward as possible for users.


**Constructing the Documentation**

I've confirmed the plan to create an empty `requirements.txt` file and draft the `README.md` in Mandarin, following the detailed structure. I'm focusing on the README's content, which will include a clear project description, usage instructions for each script with example command lines, and guidance on importing the output into Zotero. Now, my main focus is on the writing, particularly clarifying the scripts' functionalities.


**Constructing Documentation & Files**

I've completed the initial structure of the `README.md` file, providing an overview in Chinese, outlining the project's purpose and the individual scripts' functionalities. I also finalized the empty `requirements.txt` file and added a helpful comment explaining the lack of external dependencies. I'm now fine-tuning the `README.md` to ensure clarity and user-friendliness.


**Drafting Documentation in Chinese**

I've completed the initial structure of the `README.md` file in Chinese, including an overview of the project's purpose and individual script functionalities. I'm focusing on providing clear examples for command-line usage and detailed instructions for importing the converted data into Zotero. The `requirements.txt` file is finalized, with a comment explaining the lack of external dependencies. I'm now refining the wording in the `README.md` file to ensure the information is concise and easily understandable.


</details></think>

---

好的，我已经分析了您仓库中的所有 Python 脚本。这些脚本都是用来将不同来源的数据（如科研基金、新闻、播客、Twitter、YouTube）转换为 Zotero 可以导入的 CSL JSON 格式。

基于此，我将为您创建 `README.md` 和 `requirements.txt` 两个文件。

首先，我注意到所有脚本都只使用了 Python 的标准库，没有外部依赖。因此，`requirements.txt` 文件会包含一条注释来说明这一点。

接下来，我将创建 `README.md` 文件，它会包含项目简介、每个脚本的功能说明、使用方法以及如何将生成的文件导入 Zotero 的步骤。

我现在就为您创建这两个文件。

---

```diff
- 
+ # No external Python libraries are required to run these scripts.
+ # All scripts use modules from the Python standard library. 
```

---

<think><details><summary>Thought Process</summary>**Writing the README**

I've successfully generated the `requirements.txt` file and am now fully dedicated to crafting the `README.md` document. I've already outlined the core content and am in the process of putting my thoughts into writing. I'm focusing on ensuring it's clear and concise.


**Focusing on Documentation**

I'm now fully immersed in developing the `README.md` file. I've formulated the content and am employing the `edit_file` tool to bring it to life. My goal is to produce a readable and informative document to enhance usability.


</details></think>

---

好的，`requirements.txt` 文件已创建。现在我来为您创建 `README.md` 文件。

---

```diff
- 
+ # AI Scholar Scripts: Zotero 数据转换工具集
+ 
+ 本项目包含一系列 Python 脚本，旨在将各种来源的学术相关数据（如科研基金、新闻、播客、社交媒体帖子和视频）转换为 Zotero 兼容的 CSL JSON 格式。这使得研究人员可以轻松地将多样化的信息整合到他们的文献管理库中。
+ 
+ ## 功能
+ 
+ - **多源支持**: 支持从 NIH 科研基金、新闻、播客、Twitter 和 YouTube 等多种来源导入数据。
+ - **标准化输出**: 所有脚本均生成 CSL JSON 文件，可直接导入 Zotero。
+ - **易于定制**: 脚本基于 Python 标准库，无需安装外部依赖，易于理解和修改。
+ 
+ ## 脚本列表
+ 
+ - `grant_to_zotero_converter.py`: 将 NIH 基金数据（CSV 格式）转换为 Zotero 条目。
+ - `news_to_zotero_converter.py`: 将新闻搜索结果（CSV 格式）转换为 Zotero 网页条目。
+ - `podcast_to_zotero_converter.py`: 将播客元数据（CSV 格式）转换为 Zotero 音频条目。
+ - `twitter_to_zotero_converter.py`: 将 Twitter 推文数据（JSON 格式）转换为 Zotero 社交媒体帖子条目。
+ - `youtube_to_zotero_converter.py`: 将 YouTube 视频数据（JSON 格式）转换为 Zotero 视频条目。
+ 
+ ## 环境要求
+ 
+ - Python 3
+ 
+ 本项目不依赖任何第三方库，所有脚本均使用 Python 标准库。详细信息请见 `requirements.txt`。
+ 
+ ## 使用方法
+ 
+ 1.  将你的数据文件（CSV 或 JSON）放置在与脚本相同的目录中。
+ 2.  **重要**: 打开需要运行的脚本文件，在文件末尾的 `if __name__ == '__main__':` 部分，修改输入和输出文件名以匹配你的文件。
+     ```python
+     if __name__ == '__main__':
+         # 示例：修改下面这行
+         # convert_grants_to_csl('你的输入文件名.csv', '你的输出文件名.json')
+         convert_grants_to_csl('lisa-barrett-grant.csv', 'lisa-barrett-grants-csl.json') 
+     ```
+ 3.  在终端中运行脚本：
+     ```bash
+     python a_script_name.py
+     ```
+     例如:
+     ```bash
+     python grant_to_zotero_converter.py
+     ```
+ 4.  脚本执行成功后，会在目录中生成一个 `.json` 文件。
+ 
+ ## 如何导入 Zotero
+ 
+ 1.  打开 Zotero 桌面应用。
+ 2.  在菜单栏选择 `文件` -> `导入...`。
+ 3.  选择 `一个文件` 并点击 `下一步`。
+ 4.  找到并选择你刚刚生成的 `.json` 文件。
+ 5.  Zotero 会将文件中的所有条目导入到你的资料库中。 
```

---

<think><details><summary>Thought Process</summary>**Finishing the Project**

The requested files, `requirements.txt` and `README.md`, have been meticulously crafted. I analyzed all the scripts, leading to a comprehensive and informative README.  A `requirements.txt` file was also generated, confirming the absence of external dependencies. I've successfully completed the tasks.


</details></think>

---

`README.md` 和 `requirements.txt` 文件均已创建完毕。如果您有其他问题，请随时提出。

---

_**User**_

帮我修改代码，使得可以这些脚本在运行的时候，需要输入“输入文件”的路径，而不是在代码中填入

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Analyzing Command Line Input**

I'm currently working on modifying the Python scripts to accept input file paths as command-line arguments. This means I'm focused on adjusting the `if __name__ == '__main__':` block. It will involve understanding `sys.argv` and parsing these arguments effectively. My goal is to create a more flexible and user-friendly way to run the scripts.


**Parsing Arguments for Scripts**

I'm now in the process of implementing the changes to accept command-line arguments. I've begun with the `grant_to_zotero_converter.py` script, integrating the `argparse` module. I am setting up the argument parser to handle the required input file path and an optional output file path. The plan is to repeat this pattern across the remaining scripts. This will significantly enhance the usability of these tools.


**Integrating Argument Parsing**

I've successfully integrated `argparse` into the `grant_to_zotero_converter.py` script. The script now accepts an input file path as a required argument and an optional output file path. If no output file is provided, a default name is generated. Next, I'll move on to the remaining scripts, applying the same argument parsing strategy to ensure consistent functionality and usability across all tools. My goal is streamlined and intuitive command-line interaction.


**Extending Argument Handling**

I'm now integrating `argparse` into the `news_to_zotero_converter.py` script, mirroring the approach used for the grants converter. This process involves defining arguments for the input CSV file and an optional output JSON file. The plan is to create a default output filename if the user doesn't specify one. This consistency will ensure that all scripts function similarly, allowing users to interact with all the tools via command-line.


**Expanding Script Flexibility**

I'm now focused on the final conversion script, `podcast_to_zotero_converter.py`, to incorporate command-line argument handling. I'm following the established pattern: utilizing `argparse` to define the input CSV file as a required argument and an optional output JSON file. A default output filename will be generated if the user omits the output path. After completing this script, all five will consistently accept command-line input.


**Integrating Command-Line Input**

I've integrated the `argparse` module into the `podcast_to_zotero_converter.py` script. It now successfully handles command-line arguments for the input CSV file and an optional output JSON file. A default output filename will be provided if the user chooses not to specify it. With this final script completed, all five converters are equipped to accept and process command-line input.


**Enhancing Script Usability**

I've outlined the necessary changes to implement command-line argument handling across the scripts using `argparse`. The plan involves adding `argparse` and `os` imports, defining argument parsers for input and optional output files, and generating default output filenames. The next steps are to make the changes to `grant_to_zotero_converter.py` and subsequently adapt the code across other scripts, starting with `news_to_zotero_converter.py`, to streamline user interaction via command line.


**Streamlining Command-Line Input**

I'm currently working on adding command-line argument handling to the scripts. I've chosen `argparse` for its user-friendliness. I'm focusing on modifying the `if __name__ == '__main__':` block, setting up the argument parsers, and integrating them across all the conversion scripts. The goal is to provide a unified and straightforward way for users to provide the input file path, with an option to specify the output path.


**Streamlining Script Input**

I'm currently working on the final steps for implementing command-line argument handling across all scripts. I've integrated the planned changes and will now thoroughly test each script to confirm they function as expected with the new input method. I'm focusing on ensuring accurate argument parsing and the proper generation of default output filenames when needed. This will streamline the scripts' usage.


**Implementing Command-Line Updates**

I've completed my initial analysis of the scripts and detailed the steps required for command-line integration, including `argparse` and output file handling. I've successfully incorporated these updates for the `grant_to_zotero_converter.py`, `news_to_zotero_converter.py`, and `podcast_to_zotero_converter.py` scripts. I've also updated `twitter_to_zotero_converter.py` to use `argparse` for flexibility. My next goal is to implement these changes, one script at a time.


**Enhancing Command-Line Flexibility**

I'm now integrating command-line argument handling across all scripts using `argparse`. I've completed the implementation of `argparse` for `grant_to_zotero_converter.py`, `news_to_zotero_converter.py`, and `podcast_to_zotero_converter.py`, incorporating input and output file path arguments. The focus has shifted to adapting the `main` function structure for `twitter_to_zotero_converter.py` and `youtube_to_zotero_converter.py`.  My goal is to create a consistent, user-friendly interface for all conversions.


**Streamlining Command-Line Updates**

I'm now in the process of applying the `argparse` modifications across all scripts. The initial analysis is complete, with each script's `if __name__ == '__main__':` block prepped for adaptation. I've begun with the `grant_to_zotero_converter.py` script. The goal is to provide a consistent and streamlined user experience for all conversion tools.


**Streamlining Command-Line Argument Handling**

I've integrated `argparse` into `twitter_to_zotero_converter.py` and `youtube_to_zotero_converter.py`, ensuring consistent command-line argument handling across all scripts. This involved adapting the `main` functions to incorporate argument parsing for input and output file paths. The scripts now support default output filenames and improved user instructions. I'm now conducting thorough testing to confirm seamless functionality.


</details></think>

---

好的，这个需求很合理，可以让脚本更灵活。我将修改这五个 Python 脚本，让它们能够通过命令行参数接收输入文件路径，并自动生成输出文件名。

我将使用 Python 内置的 `argparse` 模块来处理命令行参数。

正在修改 `grant_to_zotero_converter.py`...

---

```diff
  import json
  import re
+ import argparse
+ import os
  
  def parse_name(name_str):
```

```diff
  
  if __name__ == '__main__':
-     convert_grants_to_csl('lisa-barrett-grant.csv', 'lisa-barrett-grants-csl.json') 
+     parser = argparse.ArgumentParser(description='Converts NIH grant data from a CSV file to a CSL JSON file for Zotero.')
+     parser.add_argument('input_csv', help='The path to the input CSV file.')
+     parser.add_argument('-o', '--output_json', help='The path to the output JSON file. If not provided, it will be generated based on the input filename.')
+     
+     args = parser.parse_args()
+ 
+     output_json_path = args.output_json
+     if not output_json_path:
+         base_name = os.path.splitext(args.input_csv)[0]
+         output_json_path = f"{base_name}-csl.json"
+ 
+     convert_grants_to_csl(args.input_csv, output_json_path) 
```

---

`grant_to_zotero_converter.py` 已修改完毕。

现在修改 `news_to_zotero_converter.py`...

---

```diff
  import csv
  import json
+ import argparse
+ import os
  
  def convert_csv_to_csl_json(csv_file_path, json_file_path):
```

```diff
  
  if __name__ == '__main__':
-     convert_csv_to_csl_json('lisa-news-search.csv', 'lisa-news-zotero.json') 
+     parser = argparse.ArgumentParser(description='Converts a CSV file from a news search into a Zotero-compatible CSL JSON file.')
+     parser.add_argument('input_csv', help='The path to the input CSV file.')
+     parser.add_argument('-o', '--output_json', help='The path to the output JSON file. If not provided, it will be generated based on the input filename.')
+     
+     args = parser.parse_args()
+ 
+     output_json_path = args.output_json
+     if not output_json_path:
+         base_name = os.path.splitext(args.input_csv)[0]
+         output_json_path = f"{base_name}-zotero.json"
+ 
+     convert_csv_to_csl_json(args.input_csv, output_json_path) 
```

---

`news_to_zotero_converter.py` 已修改完毕。

现在修改 `podcast_to_zotero_converter.py`...

---

```diff
  from datetime import datetime
  from urllib.parse import urlparse
+ import argparse
+ import os
  
  def convert_csv_to_zotero_json(csv_file_path, json_file_path):
```

```diff
  
  if __name__ == '__main__':
-     csv_input = 'lisafeldmanbarrett-podcast.csv'
-     json_output = 'lisa_podcast_zotero.json' # new file
-     convert_csv_to_zotero_json(csv_input, json_output) 
+     parser = argparse.ArgumentParser(description='将播客元数据的CSV文件转换为Zotero的CSL JSON格式。')
+     parser.add_argument('input_csv', help='输入的CSV文件路径')
+     parser.add_argument('-o', '--output_json', help='输出的JSON文件路径。如果未提供，将根据输入文件名自动生成。')
+ 
+     args = parser.parse_args()
+ 
+     output_json_path = args.output_json
+     if not output_json_path:
+         base_name = os.path.splitext(args.input_csv)[0]
+         output_json_path = f"{base_name}_zotero.json"
+ 
+     convert_csv_to_zotero_json(args.input_csv, output_json_path) 
```

---

`podcast_to_zotero_converter.py` 已修改完毕。

现在修改 `twitter_to_zotero_converter.py`...

---

```diff
  from datetime import datetime
  from typing import Dict, List, Any, Optional
+ import argparse
+ import os
  
  
```

```diff
  def main():
      """主函数"""
+     parser = argparse.ArgumentParser(
+         description="将Twitter推文数据转换为Zotero可导入的CSL JSON格式",
+         formatter_class=argparse.RawTextHelpFormatter
+     )
+     parser.add_argument('input_file', help='输入的推文JSON文件路径')
+     parser.add_argument('-o', '--output_file', help='输出的CSL JSON文件路径。如果未提供，将根据输入文件名自动生成。')
+ 
+     args = parser.parse_args()
+ 
+     output_file = args.output_file
+     if not output_file:
+         base_name = os.path.splitext(args.input_file)[0]
+         output_file = f"{base_name}_zotero.json"
+     
      converter = TwitterToZoteroConverter()
-     
-     # 输入和输出文件名
-     input_file = "dataset_twitter-user-tweets-scraper_2025-07-11_10-13-08-476.json"
-     output_file = "twitter_data_for_zotero.json"
      
      print("=== Twitter to Zotero Converter ===")
      print("将Twitter推文数据转换为Zotero可导入的CSL JSON格式")
      print()
      
-     converter.convert_file(input_file, output_file)
+     converter.convert_file(args.input_file, output_file)
      
      print()
      print("使用说明:")
      print("1. 在Zotero中，选择 File -> Import")
-     print("2. 选择生成的JSON文件")
+     print(f"2. 选择生成的JSON文件 ({output_file})")
      print("3. 确保选择正确的导入格式（CSL JSON）")
      print("4. 点击导入完成")
```

---

`twitter_to_zotero_converter.py` 已修改完毕。

最后，修改 `youtube_to_zotero_converter.py`...

---

```diff
  from datetime import datetime, timedelta
  from typing import Dict, Any, Optional
+ import argparse
+ import os
  
  def parse_relative_date(relative_date_str: str, base_date: datetime) -> Optional[Dict[str, Any]]:
```

```diff
  def main():
      """主函数"""
-     
-     # 输入和输出文件名
-     input_file = "dataset_youtube-channel-video-details-scraper_2025-07-11_13-34-29-090.json"
-     output_file = "youtube_data_for_zotero.json"
+     parser = argparse.ArgumentParser(
+         description="将YouTube视频数据转换为Zotero可导入的CSL JSON格式",
+         formatter_class=argparse.RawTextHelpFormatter
+     )
+     parser.add_argument('input_file', help='输入的YouTube视频数据JSON文件路径')
+     parser.add_argument('-o', '--output_file', help='输出的CSL JSON文件路径。如果未提供，将根据输入文件名自动生成。')
+ 
+     args = parser.parse_args()
+ 
+     output_file = args.output_file
+     if not output_file:
+         base_name = os.path.splitext(args.input_file)[0]
+         output_file = f"{base_name}_zotero.json"
  
      base_date = datetime.now()
-     match = re.search(r'(\d{4}-\d{2}-\d{2})', input_file)
+     match = re.search(r'(\d{4}-\d{2}-\d{2})', args.input_file)
      if match:
          try:
```

```diff
      print()
      
-     converter.convert_file(input_file, output_file)
+     converter.convert_file(args.input_file, output_file)
      
      print()
      print("使用说明:")
      print("1. 在Zotero中，选择 File -> Import")
-     print("2. 选择生成的JSON文件 (youtube_data_for_zotero.json)")
+     print(f"2. 选择生成的JSON文件 ({output_file})")
      print("3. 确认导入格式为 CSL JSON")
      print("4. 点击导入完成")
```

---

所有脚本都已成功修改。现在，您可以在运行这些脚本时，从命令行直接提供输入文件路径了。

例如，您可以这样运行脚本：

```bash
python grant_to_zotero_converter.py my_grants.csv
```

这将会处理 `my_grants.csv` 文件，并生成一个名为 `my_grants-csl.json` 的输出文件。

如果您想指定输出文件名，可以这样做：

```bash
python grant_to_zotero_converter.py my_grants.csv -o my_custom_output.json
```

这会对所有五个脚本生效。我还将更新 `README.md` 文件以反映这些更改。

---

```diff
  ## 使用方法
  
- 1.  将你的数据文件（CSV 或 JSON）放置在与脚本相同的目录中。
- 2.  **重要**: 打开需要运行的脚本文件，在文件末尾的 `if __name__ == '__main__':` 部分，修改输入和输出文件名以匹配你的文件。
-     ```python
-     if __name__ == '__main__':
-         # 示例：修改下面这行
-         # convert_grants_to_csl('你的输入文件名.csv', '你的输出文件名.json')
-         convert_grants_to_csl('lisa-barrett-grant.csv', 'lisa-barrett-grants-csl.json') 
-     ```
- 3.  在终端中运行脚本：
+ 1.  将你的数据文件（CSV 或 JSON）放置在项目目录中。
+ 2.  在终端中，使用 `python` 命令运行相应的转换脚本，并将输入文件路径作为参数。
+ 
      ```bash
-     python a_script_name.py
+     python [脚本文件名] [你的输入文件]
      ```
+ 
      例如:
      ```bash
-     python grant_to_zotero_converter.py
+     # 处理基金数据
+     python grant_to_zotero_converter.py 'lisa-barrett-grant.csv'
+ 
+     # 处理推文数据
+     python twitter_to_zotero_converter.py 'path/to/your/tweets.json'
      ```
- 4.  脚本执行成功后，会在目录中生成一个 `.json` 文件。
+ 3.  脚本执行成功后，会在输入文件所在的目录中生成一个对应的 `.json` 文件。例如，`lisa-barrett-grant.csv` 将生成 `lisa-barrett-grant-csl.json`。
+ 4.  (可选) 你也可以使用 `-o` 或 `--output_file` 参数来指定自定义的输出文件路径和名称：
+     ```bash
+     python youtube_to_zotero_converter.py 'videos.json' -o 'custom_youtube_zotero.json'
+     ```
  
  ## 如何导入 Zotero
```

---

`README.md` 也已更新。现在所有任务都已完成！如果您还有其他需求，请随时告诉我。

---

